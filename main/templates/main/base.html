{% load static %}
{% load livereload_tags %}

<!DOCTYPE html>
<html lang="en" class="dark">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link href="{% static 'css/styles.css' %}" rel="stylesheet">
		<link href="{% static 'css/all.min.css' %}" rel="stylesheet">
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
		{% livereload_script %}
		<title>
			{% block title %}
			Inventory MS
			{% endblock %}
		</title>
	</head>
	<body>
		<div class="offcanvas offcanvas-end" tabindex="-1" id="sidebar" aria-labelledby="sidebarLabel">
			<div class="offcanvas-header">
				<h5 class="offcanvas-title" id="sidebarLabel">Delete</h5>
				<button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
			</div>
			<div class="offcanvas-body">
			</div>
		</div>

		{% block header %}
		<header class="mb-5 bg-white shadow">
			<div class="container mx-auto py-2 d-flex justify-content-between">
				<a class="navbar-brand d-flex justify-content-center align-items-center" href="{% url 'home' %}">
					<i class="fa-solid fa-boxes-stacked"></i>
				</a>
				<nav class="navbar navbar-expand-lg">
					<div class="container-fluid">
						<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
							<span class="navbar-toggler-icon"></span>
						</button>
						<div class="collapse navbar-collapse" id="navbarSupportedContent">
							<ul class="navbar-nav mb-2 mb-lg-0">
								<li class="nav-item dropdown me-4">
									<button class="btn btn-link nav-link" role="button" data-bs-toggle="dropdown" aria-expanded="false">
										<div class="d-flex align-items-center">
											<i class="fa-regular fa-compass me-2"></i>
											<span>Browse</span>
										</div>
									</button>
									<ul class="dropdown-menu">
										<li class="dropdown-item">
											<a href="{% url 'prods' %}" class="d-flex align-items-center">
												<i class="fa-solid fa-cubes me-2"></i>
												<span>Products</span>
												<span class="badge bg-secondary ms-2">{{ count.products }}</span>
											</a>
										</li>
										<li class="dropdown-item">
											<a href="{% url 'items' %}" class="d-flex align-items-center">
												<i class="fa-solid fa-cubes me-2"></i>
												<span>Items</span>
												<span class="badge bg-secondary ms-2">{{ count.items }}</span>
											</a>
										</li>
										<li class="dropdown-item">
											<a href="{% url 'sites' %}" class="d-flex align-items-center">
												<i class="fa-solid fa-thumbtack me-2"></i>
												<span>Sites</span>
												<span class="badge bg-secondary ms-2">{{ count.sites }}</span>
											</a>
										</li>
										<li class="dropdown-item">
											<a href="{% url 'categories' %}" class="d-flex align-items-center">
												<i class="fa-solid fa-list me-2"></i>
												<span>Categories</span>
												<span class="badge bg-secondary ms-2">{{ count.categories }}</span>
											</a>
										</li>
										<li class="dropdown-item">
											<a href="{% url 'suppliers' %}" class="d-flex align-items-center">
												<i class="fa-solid fa-building me-2"></i>
												<span>Suppliers</span>
												<span class="badge bg-secondary ms-2">{{ count.suppliers }}</span>
											</a>
										</li>
										<li class="dropdown-item">
											<a href="" class="d-flex align-items-center">
												<i class="fa-solid fa-truck me-2"></i>
												<span>Orders</span>
												<span class="badge bg-secondary ms-2">{{ count.orders }}</span>
											</a>
										</li>
										<li class="dropdown-item">
											<a href="{% url 'users' %}" class="d-flex align-items-center">
												<i class="fa-solid fa-users me-2"></i>
												<span>Users</span>
											</a>
										</li>
									</ul>
								</li>
								<li class="nav-item dropdown me-4">
									<button class="btn btn-link nav-link" role="button" data-bs-toggle="dropdown" aria-expanded="false">
										<div class="d-flex align-items-center">
											<i class="fa-solid fa-circle-plus me-2"></i>
											<span>Create</span>
										</div>
									</button>
									<ul class="dropdown-menu">
										<li class="dropdown-item">
											<a href="{% url 'new_prod' %}" class="d-flex align-items-center">
												<i class="fa-solid fa-cubes me-2"></i>
												<span>Product</span>
											</a>
										</li>
										<li class="dropdown-item">
											<a href="{% url 'new_item' %}" class="d-flex align-items-center">
												<i class="fa-solid fa-cubes me-2"></i>
												<span>Item</span>
											</a>
										</li>
										<li class="dropdown-item">
											<a href="{% url 'new_site' %}" class="d-flex align-items-center">
												<i class="fa-solid fa-thumbtack me-2"></i>
												<span>Site</span>
											</a>
										</li>
										<li class="dropdown-item">
											<a href="{% url 'new_cat' %}" class="d-flex align-items-center">
												<i class="fa-solid fa-list me-2"></i>
												<span>Category</span>
											</a>
										</li>
										<li class="dropdown-item">
											<a href="{% url 'new_supplier' %}" class="d-flex align-items-center">
												<i class="fa-solid fa-building me-2"></i>
												<span>Supplier</span>
											</a>
										</li>
										<li class="dropdown-item">
											<a href="{% url 'new_user' %}" class="d-flex align-items-center">
												<i class="fa-solid fa-user me-2"></i>
												<span>User</span>
											</a>
										</li>
									</ul>
								</li>
								<li class="nav-item dropdown">
									<button class="btn btn-link nav-link" role="button" data-bs-toggle="dropdown" aria-expanded="false">
										<div class="d-flex align-items-center">
											<i class="fa-solid fa-user me-2"></i>
											<b class="text-capitalize">
												{{username}}
											</b>
										</div>
									</button>
									<ul class="dropdown-menu">
										<li class="dropdown-item">
											<a href="{% url 'logout' %}" class="d-flex align-items-center">
												<i class="fa-solid fa-right-from-bracket me-2"></i>
												<span>Logout</span>
											</a>
										</li>
									</ul>
								</li>
							</ul>
						</div>
					</div>
				</nav>
			</div>
		</header>
		{% endblock %}

		{% block messages %}
		<!-- TODO: move the messages at the bottom of the screen like mangalike.net -->
		{% if messages %}
		<div class="messages">
			<ul>
				{% for message in messages %}
				<li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
				{% endfor %}
			</ul>
		</div>
		{% endif %}
		{% endblock %}

		{% block main %}
		<section id="main-sec">
			{% block content %}
			<main class="mx-20">
				{% block actions %}
				{% endblock %}
				{% block table %}
				{% endblock %}
			</main>
			{% endblock %}
		</section>
		{% endblock %}

		<!--TODO: manage scripts loading more effectivly-->

		<script src="{% static 'js/jquery.min.js' %}" defer></script>
		<script src="{% static 'js/medium-zoom.min.js' %}" defer></script>
		<script src="{% static 'js/theme.js' %}" defer></script>
		<script src="{% static 'js/main.js' %}" defer></script>

		{% block scripts %}
		{% endblock %}

	</body>
</html>
